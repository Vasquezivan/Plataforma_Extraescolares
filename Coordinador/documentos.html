<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Gestión de Documentos - Actividades Extraescolares Unión Hidalgo</title>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
  <link href="https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
  
  <style>
    /* Mantener todos los estilos existentes del dashboard */
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
      font-family: 'Arial', sans-serif;
    }

    body {
      background-color: #f5f5f5;
      display: flex;
      min-height: 100vh;
    }

    /* Sidebar */
    .sidebar {
      width: 250px;
      background-color: #002147;
      color: white;
      transition: all 0.3s;
      position: fixed;
      height: 100vh;
      z-index: 1000;
    }

    .sidebar-header {
      padding: 20px;
      background-color: #001a36;
      text-align: center;
    }

    .sidebar-header h3 {
      color: white;
      font-size: 1.2em;
      margin: 0;
    }

    .sidebar-menu {
      padding: 20px 0;
    }

    .sidebar-menu ul {
      list-style: none;
    }

    .sidebar-menu li {
      position: relative;
    }

    .sidebar-menu a {
      display: flex;
      align-items: center;
      gap: 10px;
      padding: 15px 20px;
      color: #b8c7ce;
      text-decoration: none;
      transition: all 0.3s;
      border-left: 3px solid transparent;
      white-space: normal;
    }

    .sidebar-menu a i {
      flex-shrink: 0;
      min-width: 20px;
      text-align: center;
    }

    .sidebar-menu a:hover,
    .sidebar-menu a.active {
      color: white;
      background-color: #1a3a6a;
      border-left: 3px solid #ff7f00;
    }

    /* Main Content */
    .main-content {
      margin-left: 250px;
      width: calc(100% - 250px);
      transition: all 0.3s;
    }

    /* Header */
    .top-navbar {
      background-color: white;
      padding: 15px 20px;
      box-shadow: 0 1px 3px rgba(0,0,0,0.1);
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .toggle-sidebar {
      background: none;
      border: none;
      color: #002147;
      font-size: 20px;
      cursor: pointer;
    }

    .user-menu {
      display: flex;
      align-items: center;
    }

    .user-menu img {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      margin-right: 10px;
    }

    .user-menu span {
      color: #002147;
      font-weight: bold;
    }

    /* Dashboard Content */
    .content-wrapper {
      padding: 20px;
    }

    .welcome-section {
      background-color: white;
      border-radius: 8px;
      padding: 30px;
      margin-bottom: 30px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.05);
    }

    .welcome-section h1 {
      color: #002147;
      margin-bottom: 10px;
      font-size: 28px;
    }

    .welcome-section .unidad-nombre {
      color: #ff7f00;
      font-size: 24px;
      font-weight: bold;
      margin-bottom: 15px;
    }

    .welcome-section p {
      color: #666;
      font-size: 16px;
      line-height: 1.6;
      margin-bottom: 20px;
    }

    /* Logos */
    .header-main {
      background-color: #f5f5f5;
      padding: 20px 10px;
      display: flex;
      justify-content: center;
      flex-wrap: wrap;
      gap: 20px;
    }

    .logo-enlace img {
      height: 60px;
      transition: transform 0.2s;
    }

    .logo-enlace img:hover {
      transform: scale(1.05);
    }

    /* Footer */
    .site-footer {
      background-color: #002147;
      color: white;
      padding: 40px 0 20px;
      margin-top: 40px;
    }

    .footer-container {
      display: flex;
      flex-wrap: wrap;
      justify-content: space-between;
      max-width: 1200px;
      margin: 0 auto;
      padding: 0 20px;
      gap: 30px;
    }

    .footer-text {
      flex: 1;
      min-width: 300px;
    }

    .footer-text h3 {
      color: #ff7f00;
      margin-bottom: 15px;
      font-size: 1.3em;
      font-weight: bold;
    }

    .footer-text p {
      margin-bottom: 20px;
      line-height: 1.6;
    }

    .footer-map {
      flex: 1;
      min-width: 300px;
    }

    .footer-map iframe {
      width: 100%;
      height: 280px;
      border-radius: 8px;
      border: none;
      box-shadow: 0 3px 10px rgba(0,0,0,0.2);
    }

    .footer-copyright {
      text-align: center;
      margin-top: 30px;
      padding-top: 20px;
      border-top: 1px solid rgba(255,255,255,0.1);
      font-size: 0.9em;
      color: rgba(255,255,255,0.7);
    }

    .whatsapp-link img {
      width: 30px;
      height: 30px;
      transition: transform 0.3s;
    }

    .whatsapp-link img:hover {
      transform: scale(1.1);
    }

    /* Responsive */
    @media (max-width: 768px) {
      .sidebar {
        margin-left: -250px;
      }
      .sidebar.active {
        margin-left: 0;
      }
      .main-content {
        width: 100%;
        margin-left: 0;
      }
      .main-content.active {
        margin-left: 250px;
        width: calc(100% - 250px);
      }
      
      .footer-container {
        flex-direction: column;
      }
      
      .footer-map {
        order: -1;
      }
    }

    /* Estilos específicos para Unión Hidalgo */
    .unidad-header {
      background-color: #002147;
      color: white;
      padding: 15px;
      text-align: center;
      font-size: 1.2em;
      margin-bottom: 20px;
    }

    /* Icono de usuario flotante en la esquina superior derecha */
    #iconoPerfilContainer {
      position: fixed;
      top: 18px;
      right: 28px;
      z-index: 10000;
    }

    #iconoPerfil {
      font-size: 32px;
      color: #1B396A;
      cursor: pointer;
      transition: color 0.2s, transform 0.2s;
    }

    #iconoPerfil:hover {
      color: #ff7f00;
      transform: scale(1.08);
    }

    /* Estilos específicos para la gestión de documentos */
    .documentos-container {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
      gap: 20px;
      margin-bottom: 30px;
    }

    .documento-card {
      background-color: white;
      border-radius: 8px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.05);
      padding: 20px;
      transition: transform 0.3s;
      display: flex;
      flex-direction: column;
    }

    .documento-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 5px 15px rgba(0,0,0,0.1);
    }

    .documento-icon {
      font-size: 40px;
      color: #e74c3c;
      margin-bottom: 15px;
      text-align: center;
    }

    .documento-title {
      color: #002147;
      font-size: 18px;
      font-weight: bold;
      margin-bottom: 10px;
    }

    .documento-desc {
      color: #666;
      font-size: 14px;
      margin-bottom: 15px;
      flex-grow: 1;
    }

    .documento-actions {
      display: flex;
      justify-content: space-between;
    }

    .btn-documento {
      padding: 8px 15px;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      font-size: 14px;
      transition: background-color 0.3s;
    }

    .btn-ver {
      background-color: #3498db;
      color: white;
    }

    .btn-ver:hover {
      background-color: #2980b9;
    }

    .btn-descargar {
      background-color: #2ecc71;
      color: white;
    }

    .btn-descargar:hover {
      background-color: #27ae60;
    }

    .btn-eliminar {
      background-color: #e74c3c;
      color: white;
    }

    .btn-eliminar:hover {
      background-color: #c0392b;
    }

    .upload-section {
      background-color: white;
      border-radius: 8px;
      padding: 25px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.05);
      margin-bottom: 30px;
    }

    .upload-title {
      color: #002147;
      font-size: 22px;
      margin-bottom: 20px;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .upload-form {
      display: flex;
      flex-direction: column;
      gap: 15px;
    }

    .form-group {
      display: flex;
      flex-direction: column;
    }

    .form-group label {
      margin-bottom: 5px;
      font-weight: bold;
      color: #555;
    }

    .form-control {
      padding: 10px;
      border: 1px solid #ddd;
      border-radius: 4px;
      font-size: 14px;
    }

    .file-input-wrapper {
      position: relative;
      overflow: hidden;
      display: inline-block;
    }

    .file-input-wrapper input[type=file] {
      position: absolute;
      left: 0;
      top: 0;
      opacity: 0;
      width: 100%;
      height: 100%;
      cursor: pointer;
    }

    .file-input-button {
      display: inline-block;
      padding: 10px 15px;
      background-color: #3498db;
      color: white;
      border-radius: 4px;
      cursor: pointer;
      transition: background-color 0.3s;
    }

    .file-input-button:hover {
      background-color: #2980b9;
    }

    .btn-submit {
      background-color: #2ecc71;
      color: white;
      border: none;
      padding: 12px 20px;
      border-radius: 4px;
      font-size: 16px;
      cursor: pointer;
      transition: background-color 0.3s;
      margin-top: 10px;
    }

    .btn-submit:hover {
      background-color: #27ae60;
    }

    .btn-submit:disabled {
      background-color: #95a5a6;
      cursor: not-allowed;
    }

    .empty-state {
      text-align: center;
      padding: 40px 20px;
      color: #666;
    }

    .empty-state i {
      font-size: 50px;
      margin-bottom: 15px;
      color: #bdc3c7;
    }

    .empty-state h3 {
      margin-bottom: 10px;
      color: #7f8c8d;
    }

    .documento-info {
      font-size: 12px;
      color: #888;
      margin-bottom: 10px;
    }

    .documento-info div {
      margin-bottom: 3px;
    }
  </style>
</head>
<body>
  <!-- Sidebar -->
  <div class="sidebar">
    <div class="sidebar-header">
      <h3>Actividades Extraescolares</h3>
    </div>
    <div class="sidebar-menu">
      <ul>
        <li>
          <a href="U_CentrodeInvestigacion.html">
            <i class="fa fa-home"></i> Inicio
          </a>
        </li>
        <li>
          <a href="VerEstudiantes.html?unidad=Unidad académica Unión Hidalgo">
            <i class="fa fa-users"></i> Ver Estudiantes
          </a>
        </li>
        <li>
          <a href="contancia.html">
            <i class="fa fa-file-text"></i> Constancia de Cumplimiento 
          </a>
        </li>
        <li>
          <a href="informe.html">
            <i class="fa fa-file-pdf-o"></i> Informe de Actividad
          </a>
        </li>
        <li>
          <a href="resultados.html">
            <i class="fa fa-bar-chart"></i> Resultados
          </a>
        </li>
        <li>
          <a href="documentos.html" class="active">
            <i class="fa fa-folder-open"></i> Gestión de Documentos
          </a>
        </li>
      </ul>
    </div>
  </div>

  <!-- Main Content -->
  <div class="main-content">
    <!-- Top Navbar -->
    <div class="top-navbar">
      <button class="toggle-sidebar" id="toggle-sidebar">
        <i class="fa fa-bars"></i>
      </button>
    </div>

    <!-- Content -->
    <div class="content-wrapper">
      <!-- Logos -->
      <div class="header-main">
        <div class="logo-enlace">
          <a href="https://www.gob.mx/" target="_blank"><img src="https://vetla.tecnm.mx/wp-content/themes/TecNM-ITVE/images/pleca-GobMx.png" alt="GobMX"></a>
          <a href="https://www.gob.mx/sep" target="_blank"><img src="https://vetla.tecnm.mx/wp-content/themes/TecNM-ITVE/images/pleca-Educ.png" alt="SEP"></a>
          <a href="https://www.tecnm.mx" target="_blank"><img src="https://vetla.tecnm.mx/wp-content/themes/TecNM-ITVE/images/pleca-TecNM.png" alt="TecNM"></a>
          <a href="http://www.vetla.tecnm.mx/" target="_blank"><img src="https://vetla.tecnm.mx/wp-content/themes/TecNM-ITVE/images/pleca-ITVE.png" alt="ITVE"></a>
        </div>
      </div>

      <!-- Encabezado de unidad -->
      <div class="unidad-header">
        Tecnológico Nacional de México - Centro de Investigación y Desarrollo de Energías Renovables en Unión Hidalgo
      </div>

      <!-- Welcome Section -->
      <div class="welcome-section">
        <h1>Gestión de Documentos</h1>
        <div class="unidad-nombre">Unidad Académica Unión Hidalgo</div>
        <p>En esta sección puedes subir, visualizar y gestionar los documentos oficiales de actividades extraescolares. Todos los documentos deben estar en formato PDF.</p>
        <p><strong>Nota:</strong> Los documentos se almacenan temporalmente en el navegador y se perderán al cerrar la página.</p>
      </div>

      <!-- Sección para subir documentos -->
      <div class="upload-section">
        <h2 class="upload-title">
          <i class="fas fa-cloud-upload-alt"></i> Subir Nuevo Documento
        </h2>
        <form class="upload-form" id="documentoForm">
          <div class="form-group">
            <label for="nombreDocumento">Nombre del Documento</label>
            <input type="text" id="nombreDocumento" class="form-control" placeholder="Ej: Reglamento de Actividades Extraescolares 2023" required>
          </div>
          <div class="form-group">
            <label for="descripcionDocumento">Descripción</label>
            <textarea id="descripcionDocumento" class="form-control" rows="3" placeholder="Breve descripción del contenido del documento..." required></textarea>
          </div>
          <div class="form-group">
            <label for="categoriaDocumento">Categoría</label>
            <select id="categoriaDocumento" class="form-control" required>
              <option value="">Selecciona una categoría</option>
              <option value="reglamentos">Reglamentos</option>
              <option value="formatos">Formatos</option>
              <option value="manuales">Manuales</option>
              <option value="informes">Informes</option>
              <option value="otros">Otros</option>
            </select>
          </div>
          <div class="form-group">
            <label for="archivoDocumento">Archivo PDF</label>
            <div class="file-input-wrapper">
              <button type="button" class="file-input-button">
                <i class="fas fa-file-pdf"></i> Seleccionar archivo PDF
              </button>
              <input type="file" id="archivoDocumento" class="form-control" accept=".pdf" required>
            </div>
            <small id="nombreArchivo" style="margin-top: 5px; display: block; color: #666;"></small>
          </div>
          <button type="submit" class="btn-submit" id="btnSubirDocumento">
            <i class="fas fa-upload"></i> Subir Documento
          </button>
        </form>
      </div>

      <!-- Lista de documentos existentes -->
      <h2 style="color: #002147; margin-bottom: 20px;">
        <i class="fas fa-folder"></i> Documentos Existentes
      </h2>
      
      <div class="documentos-container" id="documentosLista">
        <!-- Los documentos se cargarán dinámicamente aquí -->
        <div class="empty-state" id="emptyState">
          <i class="fas fa-folder-open"></i>
          <h3>No hay documentos disponibles</h3>
          <p>Sube el primer documento utilizando el formulario anterior.</p>
        </div>
      </div>
    </div>

    <!-- Footer -->
    <footer class="site-footer">
      <div class="footer-container">
        <!-- Información de contacto -->
        <div class="footer-text">
          <h3>Dirección</h3>
          <p>Carretera Unión Hidalgo - Juchitán Km 3.5<br>Unión Hidalgo, Oaxaca, C.P. 70160</p>
          
          <h3>Contacto</h3>
          <p>
            Email: unionhidalgo@tecnm.mx<br>
            Teléfono: 951 987 6543
          </p>
          
          <h3>Preguntar por Whatsapp</h3>
          <a href="https://wa.me/9519876543?text=Buen%20d%C3%ADa%2C%20deseo%20informaci%C3%B3n%20" target="_blank" class="whatsapp-link">
            <img src="http://vetla.tecnm.mx/wp-content/uploads/2021/04/whatsapp.png" alt="Whatsapp">
          </a>
        </div>
        
        <!-- Mapa -->
        <div class="footer-map">
          <iframe 
            src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3826.9876543210987!2d-94.98765432109876!3d16.123456789012345!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x0%3A0x0!2zMTbCsDA3JzI0LjQiTiA5NMKwNTknMjQuNCJX!5e0!3m2!1ses!2smx!4v1234567890123!5m2!1ses!2smx"
            allowfullscreen>
          </iframe>
        </div>
      </div>
      
      <!-- Derechos reservados -->
      <div class="footer-copyright">
        <p>© 2023 Tecnológico Nacional de México - Unión Hidalgo. Todos los derechos reservados.</p>
      </div>
    </footer>
  </div>

  <!-- Icono de usuario flotante en la esquina superior derecha -->
  <div id="iconoPerfilContainer">
    <i class="fas fa-user-circle" id="iconoPerfil"></i>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
  <script>
    // Variable global para almacenar documentos
    let documentos = [];

    document.addEventListener("DOMContentLoaded", function () {
      // Menú hamburguesa
      document.getElementById("toggle-sidebar").addEventListener("click", function () {
        document.querySelector(".sidebar").classList.toggle("active");
        document.querySelector(".main-content").classList.toggle("active");
      });

      // Mostrar nombre del archivo seleccionado
      document.getElementById("archivoDocumento").addEventListener("change", function(e) {
        const fileName = e.target.files[0] ? e.target.files[0].name : "Ningún archivo seleccionado";
        document.getElementById("nombreArchivo").textContent = fileName;
      });

      // Manejar envío del formulario
      document.getElementById("documentoForm").addEventListener("submit", function(e) {
        e.preventDefault();
        subirDocumento();
      });

      // Cargar documentos existentes del localStorage
      cargarDocumentosDelStorage();
      renderizarDocumentos();

      // Configurar modal de perfil
      const iconoPerfil = document.getElementById('iconoPerfil');
      if (iconoPerfil) {
        iconoPerfil.addEventListener('click', mostrarModalPerfil);
      }
    });

    // Función para subir documento
    function subirDocumento() {
      const nombre = document.getElementById("nombreDocumento").value;
      const descripcion = document.getElementById("descripcionDocumento").value;
      const categoria = document.getElementById("categoriaDocumento").value;
      const archivo = document.getElementById("archivoDocumento").files[0];

      // Validaciones básicas
      if (!nombre || !descripcion || !categoria || !archivo) {
        Swal.fire({
          icon: 'error',
          title: 'Error',
          text: 'Por favor, completa todos los campos del formulario.'
        });
        return;
      }

      // Validar que sea PDF
      if (archivo.type !== "application/pdf") {
        Swal.fire({
          icon: 'error',
          title: 'Error',
          text: 'Solo se permiten archivos en formato PDF.'
        });
        return;
      }

      // Simular subida (en un caso real, aquí iría la llamada AJAX al servidor)
      const btnSubir = document.getElementById("btnSubirDocumento");
      btnSubir.disabled = true;
      btnSubir.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Subiendo...';

      // Simular tiempo de subida
      setTimeout(() => {
        // Crear nuevo documento
        const nuevoDocumento = {
          id: Date.now(), // ID único basado en timestamp
          nombre: nombre,
          descripcion: descripcion,
          categoria: categoria,
          fecha: new Date().toLocaleDateString('es-MX'),
          tamaño: (archivo.size / (1024 * 1024)).toFixed(2) + ' MB',
          archivo: archivo.name,
          url: URL.createObjectURL(archivo) // Crear URL temporal para el archivo
        };

        // Agregar a la lista
        documentos.unshift(nuevoDocumento);
        
        // Guardar en localStorage
        guardarDocumentosEnStorage();

        // Mostrar mensaje de éxito
        Swal.fire({
          icon: 'success',
          title: '¡Éxito!',
          text: 'El documento se ha subido correctamente.'
        });

        // Limpiar formulario
        document.getElementById("documentoForm").reset();
        document.getElementById("nombreArchivo").textContent = "";

        // Restaurar botón
        btnSubir.disabled = false;
        btnSubir.innerHTML = '<i class="fas fa-upload"></i> Subir Documento';

        // Actualizar lista de documentos
        renderizarDocumentos();
      }, 1500);
    }

    // Función para renderizar documentos en la interfaz
    function renderizarDocumentos() {
      const container = document.getElementById("documentosLista");
      const emptyState = document.getElementById("emptyState");

      if (documentos.length === 0) {
        emptyState.style.display = "block";
        container.innerHTML = '';
        container.appendChild(emptyState);
        return;
      }

      emptyState.style.display = "none";
      container.innerHTML = "";

      documentos.forEach(doc => {
        const card = document.createElement("div");
        card.className = "documento-card";
        
        // Determinar icono según categoría
        let icono = "fa-file-pdf";
        if (doc.categoria === "reglamentos") icono = "fa-gavel";
        else if (doc.categoria === "formatos") icono = "fa-file-alt";
        else if (doc.categoria === "manuales") icono = "fa-book";
        else if (doc.categoria === "informes") icono = "fa-chart-bar";
        
        card.innerHTML = `
          <div class="documento-icon">
            <i class="fas ${icono}"></i>
          </div>
          <div class="documento-title">${doc.nombre}</div>
          <div class="documento-desc">${doc.descripcion}</div>
          <div class="documento-info">
            <div><strong>Categoría:</strong> ${capitalizeFirstLetter(doc.categoria)}</div>
            <div><strong>Fecha:</strong> ${doc.fecha}</div>
            <div><strong>Tamaño:</strong> ${doc.tamaño}</div>
            <div><strong>Archivo:</strong> ${doc.archivo}</div>
          </div>
          <div class="documento-actions">
            <button class="btn-documento btn-ver" onclick="verDocumento(${doc.id})">
              <i class="fas fa-eye"></i> Ver
            </button>
            <button class="btn-documento btn-descargar" onclick="descargarDocumento(${doc.id})">
              <i class="fas fa-download"></i> Descargar
            </button>
            <button class="btn-documento btn-eliminar" onclick="eliminarDocumento(${doc.id})">
              <i class="fas fa-trash"></i> Eliminar
            </button>
          </div>
        `;
        
        container.appendChild(card);
      });
    }

    // Funciones para almacenamiento local
    function guardarDocumentosEnStorage() {
      localStorage.setItem('documentosExtraescolares', JSON.stringify(documentos));
    }

    function cargarDocumentosDelStorage() {
      const documentosGuardados = localStorage.getItem('documentosExtraescolares');
      if (documentosGuardados) {
        documentos = JSON.parse(documentosGuardados);
      }
    }

    // Funciones auxiliares
    function capitalizeFirstLetter(string) {
      return string.charAt(0).toUpperCase() + string.slice(1);
    }

    // Funciones para acciones de documentos
    function verDocumento(id) {
      const documento = documentos.find(doc => doc.id === id);
      if (documento && documento.url) {
        // Abrir el PDF en una nueva pestaña
        window.open(documento.url, '_blank');
      } else {
        Swal.fire({
          title: 'Error',
          text: 'No se puede visualizar el documento.',
          icon: 'error',
          confirmButtonText: 'Entendido'
        });
      }
    }

    function descargarDocumento(id) {
      const documento = documentos.find(doc => doc.id === id);
      if (documento && documento.url) {
        // Crear un enlace temporal para descargar
        const link = document.createElement('a');
        link.href = documento.url;
        link.download = documento.archivo || 'documento.pdf';
        document.body.appendChild(link);
        link.click();
        document.body.removeChild(link);
        
        Swal.fire({
          title: 'Descargando',
          text: 'El documento se está descargando.',
          icon: 'success',
          timer: 1500,
          showConfirmButton: false
        });
      } else {
        Swal.fire({
          title: 'Error',
          text: 'No se puede descargar el documento.',
          icon: 'error',
          confirmButtonText: 'Entendido'
        });
      }
    }

    function eliminarDocumento(id) {
      Swal.fire({
        title: '¿Estás seguro?',
        text: "Esta acción no se puede deshacer",
        icon: 'warning',
        showCancelButton: true,
        confirmButtonColor: '#d33',
        cancelButtonColor: '#3085d6',
        confirmButtonText: 'Sí, eliminar',
        cancelButtonText: 'Cancelar'
      }).then((result) => {
        if (result.isConfirmed) {
          // Eliminar documento de la lista
          documentos = documentos.filter(doc => doc.id !== id);
          
          // Actualizar localStorage
          guardarDocumentosEnStorage();
          
          // Actualizar interfaz
          renderizarDocumentos();
          
          Swal.fire(
            '¡Eliminado!',
            'El documento ha sido eliminado.',
            'success'
          );
        }
      });
    }

    // Función para mostrar modal de perfil (copiada del código original)
    function mostrarModalPerfil() {
      if (document.getElementById('modalPerfilUsuario')) return;

      const usuarioActual = sessionStorage.getItem('usuario') || 'Usuario Invitado';

      const modalHTML = `
        <div id="modalPerfilUsuario" style="position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; background: rgba(0,0,0,0.5); z-index: 9999; display: flex; align-items: center; justify-content: center;">
          <div style="background: #fff; border-radius: 12px; padding: 30px 40px; min-width: 300px; box-shadow: 0 8px 24px rgba(0,0,0,0.2); text-align: center; position: relative;">
            <i class="fas fa-user-circle" style="font-size: 60px; color: #1B396A; margin-bottom: 15px;"></i>
            <h2 style="color: #1B396A; font-size: 22px; margin-bottom: 10px;">Perfil de Usuario</h2>
            <p style="font-size: 17px; margin-bottom: 25px;"><strong>${usuarioActual}</strong></p>
            <button id="btnCerrarSesion" style="background: #d33; color: #fff; border: none; border-radius: 5px; padding: 10px 25px; font-size: 16px; font-weight: bold; cursor: pointer;">
              <i class="fas fa-sign-out-alt" style="margin-right: 7px;"></i>Cerrar Sesión
            </button>
            <button id="btnCerrarModalPerfil" style="position: absolute; top: 10px; right: 15px; background: none; border: none; font-size: 22px; color: #888; cursor: pointer;">&times;</button>
          </div>
        </div>
      `;
      document.body.insertAdjacentHTML('beforeend', modalHTML);

      document.getElementById('btnCerrarSesion').onclick = function() {
        sessionStorage.clear();
        window.location.href = '../index.html';
      };

      document.getElementById('btnCerrarModalPerfil').onclick = function() {
        document.getElementById('modalPerfilUsuario').remove();
      };

      document.getElementById('modalPerfilUsuario').onclick = function(e) {
        if (e.target === this) this.remove();
      };
    }
  </script>
</body>
</html>