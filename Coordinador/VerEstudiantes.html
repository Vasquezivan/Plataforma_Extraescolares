<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Listado de Estudiantes - ITVE</title>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
  <link href="https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  <link rel="stylesheet" href="https://cdn.datatables.net/1.11.5/css/jquery.dataTables.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">

  <style>
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
      font-family: 'Arial', sans-serif;
    }

    body {
      background-color: #f5f5f5;
      display: flex;
      min-height: 100vh;
    }

    /* Sidebar */
    .sidebar {
      width: 250px;
      background-color: #002147;
      color: white;
      transition: all 0.3s;
      position: fixed;
      height: 100vh;
      z-index: 1000;
    }

    .sidebar-header {
      padding: 20px;
      background-color: #001a36;
      text-align: center;
    }

    .sidebar-header h3 {
      color: white;
      font-size: 1.2em;
      margin: 0;
    }

    .sidebar-menu {
      padding: 20px 0;
    }

    .sidebar-menu ul {
      list-style: none;
    }

    .sidebar-menu li {
      position: relative;
    }

    .sidebar-menu a {
      display: flex;
      align-items: center;
      gap: 10px;
      padding: 15px 20px;
      color: #b8c7ce;
      text-decoration: none;
      transition: all 0.3s;
      border-left: 3px solid transparent;
      white-space: normal;
    }

    .sidebar-menu a i {
      flex-shrink: 0;
      min-width: 20px;
      text-align: center;
    }

    .sidebar-menu a:hover,
    .sidebar-menu a.active {
      color: white;
      background-color: #1a3a6a;
      border-left: 3px solid #ff7f00;
    }

    /* Main Content */
    .main-content {
      margin-left: 250px;
      width: calc(100% - 250px);
      transition: all 0.3s;
    }

    /* Header */
    .top-navbar {
      background-color: white;
      padding: 15px 20px;
      box-shadow: 0 1px 3px rgba(0,0,0,0.1);
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .toggle-sidebar {
      background: none;
      border: none;
      color: #002147;
      font-size: 20px;
      cursor: pointer;
    }

    /* Estilos para la tabla */
    .tabla-container {
      margin: 20px auto;
      padding: 20px;
      background: white;
      border-radius: 8px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
      max-width: 95%;
    }
    
    #dataTable_wrapper {
      width: 100%;
      margin: 0 auto;
    }
    
    /* Estilos para el encabezado con título y buscador */
    .tabla-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
      flex-wrap: wrap;
      gap: 15px;
    }
    
    /* Contenedor del buscador alineado a la derecha */
    .search-container {
      display: flex;
      align-items: center;
      margin-left: auto;
    }
    
    /* Campo de búsqueda */
    .buscador {
      padding: 8px 12px;
      border: 1px solid #ddd;
      border-radius: 4px 0 0 4px;
      width: 250px;
      height: 36px;
      box-sizing: border-box;
      transition: border-color 0.3s;
    }
    
    .buscador:focus {
      border-color: #1a3461;
      outline: none;
    }
    
    /* Botón de búsqueda */
    .btn-buscar {
      padding: 8px 12px;
      background: #1a3461;
      color: white;
      border: none;
      border-radius: 0 4px 4px 0;
      cursor: pointer;
      height: 36px;
      display: flex;
      align-items: center;
      transition: background 0.3s;
    }
    
    .btn-buscar:hover {
      background: #0d1a33;
    }
    
    /* Botón de recarga */
    .btn-recargar {
      margin-left: 8px;
      background: #6c757d;
      color: white;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      padding: 8px;
      height: 36px;
      width: 36px;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: background 0.3s;
    }
    
    .btn-recargar:hover {
      background: #5a6268;
    }
    
    /* Estilos para la tabla */
    #dataTable {
      width: 100% !important;
      margin-top: 15px;
    }
    
    /* Estilos para los botones de acción */
    .btn-editar, .btn-eliminar {
      background: none;
      border: none;
      cursor: pointer;
      font-size: 1.1em;
      padding: 5px 8px;
      margin: 0 2px;
      border-radius: 4px;
      transition: all 0.2s;
    }
    
    .btn-editar { 
      color: #ffc107; 
    }
    .btn-editar:hover { 
      background: rgba(255, 193, 7, 0.1); 
    }
    
    .btn-eliminar { 
      color: #dc3545; 
    }
    .btn-eliminar:hover { 
      background: rgba(220, 53, 69, 0.1); 
    }

    body { font-family: Arial, sans-serif; background: #f8f9fa; }
    table { width: 90%; margin: 30px auto; border-collapse: collapse; background: #fff; }
    th, td { padding: 12px 15px; border: 1px solid #ddd; }
    th { background: #1a3461; color: #fff; }
    tr:nth-child(even) { background: #f2f2f2; }

    /* Logos */
    .header-main {
      background-color: #f5f5f5;
      padding: 20px 10px;
      display: flex;
      justify-content: center;
      flex-wrap: wrap;
      gap: 20px;
    }

    .logo-enlace img {
      height: 60px;
      transition: transform 0.2s;
    }

    .logo-enlace img:hover {
      transform: scale(1.05);
    }

    /* Encabezado de unidad */
    .unidad-header {
      background-color: #002147;
      color: white;
      padding: 15px;
      text-align: center;
      font-size: 1.2em;
      margin-bottom: 20px;
    }

    /* Mensaje de unidad */
    .mensaje-unidad {
      background-color: #002147;
      color: white;
      padding: 10px 15px;
      border-radius: 5px;
      margin: 15px auto;
      max-width: 800px;
      text-align: center;
      font-weight: bold;
    }

    /* Footer */
    .site-footer {
      background-color: #002147;
      color: white;
      padding: 40px 0 20px;
      margin-top: 40px;
    }

    .footer-container {
      display: flex;
      flex-wrap: wrap;
      justify-content: space-between;
      max-width: 1200px;
      margin: 0 auto;
      padding: 0 20px;
      gap: 30px;
    }

    .footer-text {
      flex: 1;
      min-width: 300px;
    }

    .footer-text h3 {
      color: #ff7f00;
      margin-bottom: 15px;
      font-size: 1.3em;
      font-weight: bold;
    }

    .footer-text p {
      margin-bottom: 20px;
      line-height: 1.6;
    }

    .footer-map {
      flex: 1;
      min-width: 300px;
    }

    .footer-map iframe {
      width: 100%;
      height: 280px;
      border-radius: 8px;
      border: none;
      box-shadow: 0 3px 10px rgba(0,0,0,0.2);
    }

    .footer-copyright {
      text-align: center;
      margin-top: 30px;
      padding-top: 20px;
      border-top: 1px solid rgba(255,255,255,0.1);
      font-size: 0.9em;
      color: rgba(255,255,255,0.7);
    }

    .whatsapp-link img {
      width: 30px;
      height: 30px;
      transition: transform 0.3s;
    }

    .whatsapp-link img:hover {
      transform: scale(1.1);
    }

    /* Icono de usuario flotante en la esquina superior derecha */
    #iconoPerfilContainer {
      position: fixed;
      top: 18px;
      right: 28px;
      z-index: 10000;
    }

    #iconoPerfil {
      font-size: 32px;
      color: #1B396A;
      cursor: pointer;
      transition: color 0.2s, transform 0.2s;
    }

    #iconoPerfil:hover {
      color: #ff7f00;
      transform: scale(1.08);
    }

    /* Responsive */
    @media (max-width: 768px) {
      .sidebar {
        margin-left: -250px;
      }
      .sidebar.active {
        margin-left: 0;
      }
      .main-content {
        width: 100%;
        margin-left: 0;
      }
      .main-content.active {
        margin-left: 250px;
        width: calc(100% - 250px);
      }
      
      .footer-container {
        flex-direction: column;
      }
      
      .footer-map {
        order: -1;
      }

      .tabla-header {
        flex-direction: column;
        align-items: flex-start;
      }

      .search-container {
        margin-left: 0;
        width: 100%;
      }

      .buscador {
        width: calc(100% - 44px);
      }
    }
  </style>
</head>
<body>
<!-- Sidebar -->
  <div class="sidebar">
    <div class="sidebar-header">
      <h3>Actividades Extraescolares</h3>
    </div>
    <div class="sidebar-menu">
      <ul>
        <a href="#" onclick="window.history.back(); return false;">
          <i class="fa fa-home"></i> Regresar
        </a>
        <li>
          <a href="VerEstudiantes.html" class="active">
            <i class="fa fa-users"></i> Ver Estudiantes
          </a>
        </li>
        <li>
          <a href="contancia.html">
            <i class="fa fa-file-text"></i> Constancia de Cumplimiento 
          </a>
        </li>
        <li>
          <a href="informe.html">
            <i class="fa fa-file-pdf-o"></i> Informe de Actividad
          </a>
        </li>
        <li>
          <a href="resultados.html">
            <i class="fa fa-bar-chart"></i> Resultados
          </a>
        </li>
      </ul>
    </div>
  </div>

  <!-- Main Content -->
  <div class="main-content">
    <!-- Top Navbar -->
    <div class="top-navbar">
      <button class="toggle-sidebar" id="toggle-sidebar">
        <i class="fa fa-bars"></i>
      </button>
      <div class="user-menu">
        <span id="nombre-usuario"></span>
      </div>
    </div>

    <!-- Content -->
    <div class="content-wrapper">
      <!-- Logos -->
      <div class="header-main">
        <div class="logo-enlace">
          <a href="https://www.gob.mx/" target="_blank"><img src="https://vetla.tecnm.mx/wp-content/themes/TecNM-ITVE/images/pleca-GobMx.png" alt="GobMX"></a>
          <a href="https://www.gob.mx/sep" target="_blank"><img src="https://vetla.tecnm.mx/wp-content/themes/TecNM-ITVE/images/pleca-Educ.png" alt="SEP"></a>
          <a href="https://www.tecnm.mx" target="_blank"><img src="https://vetla.tecnm.mx/wp-content/themes/TecNM-ITVE/images/pleca-TecNM.png" alt="TecNM"></a>
          <a href="http://www.vetla.tecnm.mx/" target="_blank"><img src="https://vetla.tecnm.mx/wp-content/themes/TecNM-ITVE/images/pleca-ITVE.png" alt="ITVE"></a>
        </div>
      </div>

      <!-- Encabezado de unidad -->
      <div class="unidad-header">
        Tecnológico Nacional de México
      </div>

      <!-- Mensaje de unidad académica -->
      <div class="mensaje-unidad" id="mensaje-unidad">
        Cargando datos de la unidad académica...
      </div>

      <!-- Contenedor de la tabla -->
      <div class="tabla-container">
        <div class="tabla-header">
          <h2>Usuarios Registrados</h2>
          <div class="search-container">
            <input type="text" id="buscador-nombre" placeholder="Buscar por nombre..." class="buscador">
            <button id="btn-buscar-nombre" class="btn-buscar" title="Buscar">
              <i class="fas fa-search"></i>
            </button>
            <button id="btn-recargar" class="btn-recargar" title="Recargar tabla">
              <i class="fas fa-sync-alt"></i>
            </button>
          </div>
        </div>
        
        <table id="dataTable" class="display nowrap">
          <thead>
         <tr>
    <th>ID Alumno</th>
    <th>Nombre</th>
    <th>ID Usuario</th>
    <th>No. Control</th>
    <th>Carrera</th>
    <th>Extraescolar</th> <!-- ✅ Nueva columna -->
    <th>Semestre</th>
    <th>Acciones</th>
  </tr>
          </thead>
          <tbody>
            <!-- Los datos se cargarán dinámicamente mediante AJAX -->
          </tbody>
        </table>
      </div>
    </div>

    <!-- Footer -->
    <footer class="site-footer">
      <div class="footer-container">
        <!-- Información de contacto -->
        <div class="footer-text">
          <h3>Dirección</h3>
          <p>Abasolo S/N, Barrio del Agua Buena<br>Santiago Suchilquitongo Oaxaca, C.P. 68230</p>
          
          <h3>Contacto</h3>
          <p>
            Email: info@vetla.tecnm.mx<br>
            Teléfono: 951 305 29 27
          </p>
          
          <h3>Preguntar por Whatsapp</h3>
          <a href="https://wa.me/9513052927?text=Buen%20d%C3%ADa%2C%20deseo%20informaci%C3%B3n%20" target="_blank" class="whatsapp-link">
            <img src="http://vetla.tecnm.mx/wp-content/uploads/2021/04/whatsapp.png" alt="Whatsapp">
          </a>
        </div>
        
        <!-- Mapa -->
        <div class="footer-map">
          <iframe 
            src="https://www.google.com/maps/embed?pb=!1m14!1m8!1m3!1d15241.367048623282!2d-96.8702191!3d17.2506929!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x85c6e36d891967db%3A0x512f566ad941ae57!2sTecnol%C3%B3gico%20Nacional%20de%20M%C3%A9xico%20campus%20Instituto%20Tecnol%C3%B3gico%20del%20Valle%20de%20Etla!5e0!3m2!1ses!2smx!4v1621983062705!5m2!1ses!2smx"
            allowfullscreen>
          </iframe>
        </div>
      </div>
      
      <!-- Derechos reservados -->
      <div class="footer-copyright">
        <p>© 2023 Tecnológico Nacional de México - Campus Valle de Etla. Todos los derechos reservados.</p>
      </div>
    </footer>
  </div>
  <!-- Icono de usuario flotante en la esquina superior derecha -->
  <div id="iconoPerfilContainer">
    <i class="fas fa-user-circle" id="iconoPerfil"></i>
  </div>

  <!-- Librerías JavaScript -->
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script src="https://cdn.datatables.net/1.11.5/js/jquery.dataTables.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

  <!-- Script personalizado -->
  <script>
  $(document).ready(function() {
      // Variable para almacenar la unidad académica del usuario
      let unidadAcademica = '';
      
      // 1. Cargar información del usuario y su unidad académica
      function cargarUsuarioYUnidad() {
          $.ajax({
              url: "php/obtener_usuario.php",
              method: "GET",
              dataType: "json",
              success: function(data) {
                  if (data && typeof data === "object" && !Array.isArray(data)) {
                      // Mostrar nombre de usuario
                      $("#nombre-usuario").text(data.nombre || "Usuario");
                      
                      // Guardar unidad académica
                      unidadAcademica = data.unidad_academica || '';
                      
                      // Actualizar mensaje de unidad
                      const mensajeUnidad = $('#mensaje-unidad');
                      if (unidadAcademica) {
                          mensajeUnidad.text(`Mostrando estudiantes de: ${unidadAcademica}`);
                      } else {
                          mensajeUnidad.text('Mostrando todos los estudiantes (no se especificó unidad académica)');
                          mensajeUnidad.css('backgroundColor', '#ff7f00'); // Cambiar color para advertencia
                      }
                      
                      // Configurar DataTables con la unidad académica
                      inicializarDataTable(unidadAcademica);
                  } else {
                      throw new Error("Respuesta JSON no válida");
                  }
              },
              error: function(xhr, status, error) {
                  console.error("Error al cargar usuario:", error);
                  $("#nombre-usuario").text("Usuario");
                  Swal.fire({
                      title: 'Error',
                      text: 'No se pudo cargar la información del usuario',
                      icon: 'error'
                  });
                  // Inicializar tabla sin filtro de unidad
                  inicializarDataTable();
              }
          });
      }

      // 2. Configuración inicial de DataTables con filtro por unidad
      function inicializarDataTable(unidad = '') {
          var tabla = $('#dataTable').DataTable({
              "ajax": {
                  "url": "php/obtener_estudiantes.php",
                  "data": function(d) {
                      if (unidad) {
                          d.unidad = unidad;
                      }
                  },
                  "dataSrc": "",
                  "error": function(xhr, error, thrown) {
                      Swal.fire({
                          icon: 'error',
                          title: 'Error al cargar datos',
                          text: 'No se pudieron obtener los registros. Por favor intente más tarde.'
                      });
                      console.error("Error en la carga de datos:", xhr.responseText);
                  }
              },
             "columns": [
    { "data": "id_alumno" },
    { "data": "nombre" },
    { "data": "id_usuario" },
    { "data": "numero_control" },
    { "data": "carrera" },
    { "data": "extraescolar" }, 
    { "data": "semestre" },
    {
        "data": null,
        "className": "dt-center",
        "orderable": false,
        "render": function(data, type, row) {
            return `
                <button class='btn-editar' data-id='${row.id_alumno}' title='Editar registro'>
                    <i class='fas fa-edit'></i>
                </button>
            `;
                      }
                  }
              ],
              "language": {
                  "url": "//cdn.datatables.net/plug-ins/1.11.5/i18n/es-MX.json"
              },
              "responsive": true,
              "dom": 'rt<"bottom"lip><"clear">'
          });

          // Función para buscar al escribir en el campo de búsqueda
          $('#buscador-nombre').on('keyup', function() {
              tabla.search(this.value).draw();
          });

          // Función para buscar al hacer clic en el botón de búsqueda
          $('#btn-buscar-nombre').on('click', function() {
              tabla.search($('#buscador-nombre').val()).draw();
          });

          // Función para recargar la tabla
          $('#btn-recargar').on('click', function() {
              tabla.ajax.reload(null, false);
              $('#buscador-nombre').val('');
          });

          // Función para editar un registro
          $('#dataTable').on('click', '.btn-editar', function() {
              var id = $(this).data('id');
              var fila = $(this).closest('tr');
              var datos = tabla.row(fila).data();
              
              Swal.fire({
                  title: 'Editar Estudiante',
                  html: `
                      <form id="form-editar">
                          <div class="form-group">
                              <label for="edit-nombre">Nombre:</label>
                              <input type="text" id="edit-nombre" class="swal2-input" value="${datos.nombre}" required>
                          </div>
                          <div class="form-group">
                              <label for="edit-numero_control">No. Control:</label>
                              <input type="text" id="edit-numero_control" class="swal2-input" value="${datos.numero_control}" required>
                          </div>
                          <div class="form-group">
                              <label for="edit-carrera">Carrera:</label>
                              <input type="text" id="edit-carrera" class="swal2-input" value="${datos.carrera}" required>
                          </div>
                          <div class="form-group">
                              <label for="edit-semestre">Semestre:</label>
                              <input type="text" id="edit-semestre" class="swal2-input" value="${datos.semestre}" required>
                          </div>
                      </form>
                  `,
                  focusConfirm: false,
                  showCancelButton: true,
                  confirmButtonText: 'Guardar',
                  cancelButtonText: 'Cancelar',
                  preConfirm: () => {
                      return {
                          nombre: $('#edit-nombre').val(),
                          numero_control: $('#edit-numero_control').val(),
                          carrera: $('#edit-carrera').val(),
                          semestre: $('#edit-semestre').val()
                      }
                  }
              }).then((result) => {
                  if (result.isConfirmed) {
                      $.ajax({
                          url: 'php/actualizar_estudiante1.php',
                          type: 'POST',
                          data: {
                              id_alumno: id,
                              nombre: result.value.nombre,
                              numero_control: result.value.numero_control,
                              carrera: result.value.carrera,
                              semestre: result.value.semestre,
                              unidad_academica: unidadAcademica // Enviar unidad académica para validación
                          },
                          dataType: 'json',
                          success: function(response) {
                              if(response.success) {
                                  Swal.fire({
                                      icon: 'success',
                                      title: 'Éxito',
                                      text: 'Registro actualizado correctamente'
                                  });
                                  tabla.ajax.reload(null, false);
                              } else {
                                  Swal.fire({
                                      icon: 'error',
                                      title: 'Error',
                                      text: response.message || 'Error al actualizar el registro'
                                  });
                              }
                          },
                          error: function() {
                              Swal.fire({
                                  icon: 'error',
                                  title: 'Error',
                                  text: 'Error al conectar con el servidor'
                              });
                          }
                      });
                  }
              });
          });

          // Función para mostrar mensaje de error si falla la carga inicial
          tabla.on('error.dt', function(e, settings, techNote, message) {
              Swal.fire({
                  icon: 'error',
                  title: 'Error',
                  text: 'Ocurrió un error al cargar los datos. Por favor recarga la página.'
              });
              console.error('DataTables Error: ', message);
          });
      }

      // 3. Mostrar modal de perfil
      function mostrarModalPerfil() {
          // Evita duplicar el modal
          if (document.getElementById('modalPerfilUsuario')) return;

          const usuarioActual = sessionStorage.getItem('usuario') || 'Usuario Invitado';

          const modalHTML = `
            <div id="modalPerfilUsuario" style="position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; background: rgba(0,0,0,0.5); z-index: 9999; display: flex; align-items: center; justify-content: center;">
              <div style="background: #fff; border-radius: 12px; padding: 30px 40px; min-width: 300px; box-shadow: 0 8px 24px rgba(0,0,0,0.2); text-align: center; position: relative;">
                <i class="fas fa-user-circle" style="font-size: 60px; color: #1B396A; margin-bottom: 15px;"></i>
                <h2 style="color: #1B396A; font-size: 22px; margin-bottom: 10px;">Perfil de Usuario</h2>
                <p style="font-size: 17px; margin-bottom: 25px;"><strong>${usuarioActual}</strong></p>
                <button id="btnCerrarSesion" style="background: #d33; color: #fff; border: none; border-radius: 5px; padding: 10px 25px; font-size: 16px; font-weight: bold; cursor: pointer;">
                  <i class="fas fa-sign-out-alt" style="margin-right: 7px;"></i>Cerrar Sesión
                </button>
                <button id="btnCerrarModalPerfil" style="position: absolute; top: 10px; right: 15px; background: none; border: none; font-size: 22px; color: #888; cursor: pointer;">&times;</button>
              </div>
            </div>
          `;
          document.body.insertAdjacentHTML('beforeend', modalHTML);

          document.getElementById('btnCerrarSesion').onclick = function() {
              sessionStorage.clear();
              window.location.href = '../index.html'; // Ajusta la ruta si es necesario
          };

          document.getElementById('btnCerrarModalPerfil').onclick = function() {
              document.getElementById('modalPerfilUsuario').remove();
          };

          document.getElementById('modalPerfilUsuario').onclick = function(e) {
              if (e.target === this) this.remove();
          };
      }

      // Menú hamburguesa
      document.getElementById("toggle-sidebar").addEventListener("click", function () {
          document.querySelector(".sidebar").classList.toggle("active");
          document.querySelector(".main-content").classList.toggle("active");
      });

      // Mostrar modal de perfil al hacer clic en el icono de usuario
      const iconoPerfil = document.getElementById('iconoPerfil');
      if (iconoPerfil) {
          iconoPerfil.addEventListener('click', mostrarModalPerfil);
      }

      // Inicializar la página
      cargarUsuarioYUnidad();
  });

  // Redirección dinámica del enlace "Inicio"
  document.addEventListener("DOMContentLoaded", function () {
      const linkInicio = document.getElementById("link-inicio");

      if (linkInicio) {
          const unidad = sessionStorage.getItem("unidad_academica");
          let ruta = "index.html"; // Valor por defecto

          switch (unidad) {
              case "CIDERS unión Hidalgo":
                  ruta = "U_CentrodeInvestigacion.html";
                  break;
              case "Unidad Demetrio Vallejo en el Espinal":
                  ruta = "U_Demetrio.html";
                  break;
              case "Unidad Académica Tlahuitoltepec":
                  ruta = "U_SantaMaria.html";
                  break;
              case "Valle de Etla":
                  ruta = "U_ValleEtla.html";
                  break;
          }

          linkInicio.setAttribute("href", ruta);
      }
  });
  </script>
</body>
</html>